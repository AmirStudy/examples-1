drivers:
  encode:  # -> Encoder Pod.yml
    handlers:
      /:
        - handler_encode_doc: encode
    help: encode documents into embeddings

  segment:  # -> segment Pod.yml
    handlers:
      /:
        - handler_segment: transform
    help: segment documents into chunks

  index-chunk-and-meta:
    handlers:
      SearchRequest:
        - handler_chunk_search: query
        - handler_meta_search_chunk: meta_query
      IndexRequest:
        - handler_chunk_index: add
        - handler_prune_chunk
        - handler_meta_index_chunk: meta_add
    help: index and search embeddings and meta information of chunks

  index-meta-doc:
    handlers:
      SearchRequest:
        - handler_meta_search_doc: query
      IndexRequest:
        - handler_prune_doc
        - handler_meta_index_doc: add
    help: index and search meta information of chunks

  score:
    handlers:
      SearchRequest:
        - handler_prune_chunk  # embedding info on chunk is used and no need anymore
        - handler_chunk2doc_score: score
        - handler_prune_doc  # no need on chunk-level info anymore
    help: lift the topk chunk result to topk doc result

